<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
	$(document).ready(function(){
		$("input").keyup(function(){
			var buy = $("#buy_input").val();
			var sell = $("#sell_input").val();
			var quantity = $("#quantity_input").val();
			if (Number.isNaN(quantity) || quantity == "" || quantity === null) {
				quantity=1;
			}
			var turnover = (parseInt(buy) + parseInt(sell))*parseInt(quantity);
			var brokerage=0.01/100*turnover;
			brokerage=Number(brokerage.toFixed(2));
			if(brokerage>40){
				brokerage=40;
			}
			var stt=0.025/100*sell*quantity;
			stt=Math.round(stt);
			stt=Number(stt.toFixed(2));
			var exch=0.00325/100*turnover
			exch=Number(exch.toFixed(2));
			var gst=18/100*(brokerage+exch);
			gst=Number(gst.toFixed(2));
			var duty =0.01/100*turnover;
			duty=Number(duty.toFixed(2));
			var sebi=15/10000000*turnover;
			sebi=Number(sebi.toFixed(2));
			console.log("B:",buy,"S:",sell,"Q:",quantity,"T:",turnover);
			console.log("Brok:",brokerage,"STT:",stt,"Exch:",exch,"GST:",gst,"Duty:",duty,"SEBI:",sebi);
			var charges=Number(brokerage+stt+exch+gst+duty+sebi);
			charges=Math.round(charges * 100) / 100;
			$("#charges").text(charges);
			var profit = Number((quantity*(sell-buy))-charges);
			profit=Math.round(profit * 100) / 100;
			$("#profit").text(profit);
		});
	})
</script>
</head>
	<body>
		Buy: <input type="number" id="buy_input">
		Sell: <input type="number" id="sell_input">
		Quantity: <input type="number" id="quantity_input"></br>
		Charges: <span id="charges"></span>
		Profit: <span id="profit"></span>
	</body>
</html>
